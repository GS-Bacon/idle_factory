{
  "meta": {
    "name": "Industrial Lowpoly Style Guide",
    "version": "1.1.0",
    "description": "Unturned / Create mod風の工業的ローポリスタイル + Bevy技術仕様",
    "engine": "Bevy",
    "format": "glTF 2.0",
    "references": [
      {
        "name": "Kenney Conveyor Kit",
        "url": "https://kenney.nl/assets/conveyor-kit",
        "description": "60+モデル、単一テクスチャ、最適化済みローポリ工業アセット",
        "license": "CC0 1.0"
      },
      {
        "name": "Unturned",
        "description": "ブロック感のあるローポリスタイルの参考"
      },
      {
        "name": "Minecraft Create Mod",
        "description": "工業的メカニズムと視覚的フィードバックの参考"
      }
    ]
  },

  "modeling_principles": {
    "kit_bashing": {
      "description": "プリミティブの組み合わせでモデリング",
      "allowed": ["primitive placement", "transform", "join", "boolean"],
      "forbidden": ["vertex editing", "sculpting", "subdivision surface"],
      "comment": "頂点移動などの複雑なメッシュ操作は禁止、基本図形の配置のみ"
    },
    "hierarchy": {
      "required": true,
      "root_object": "Empty",
      "pivot_position": "bottom_center",
      "comment": "すべてのパーツをルートEmptyの子要素として相対座標で配置"
    },
    "part_reuse": {
      "enabled": true,
      "common_parts": ["gear", "shaft", "pipe", "bolt", "piston", "roller"],
      "comment": "共通パーツを関数化して再利用"
    }
  },

  "geometry": {
    "primitives": {
      "allowed_shapes": ["quad", "hexagon", "octagon", "chamfered_cube", "trapezoid"],
      "forbidden": ["circle", "sphere", "cylinder", "bezier_curve", "nurbs"],
      "curve_substitutions": {
        "circle": "octagon",
        "sphere": "chamfered_cube_24face",
        "cylinder": "octagonal_prism",
        "cone": "octagonal_pyramid",
        "torus": "octagonal_ring"
      }
    },
    "grid": {
      "snap_unit": 0.0625,
      "comment": "1/16ブロック単位でスナップ"
    },
    "chamfer": {
      "enabled": true,
      "angle": 45,
      "size_ratio": 0.1,
      "comment": "エッジは45度面取りで機械的表現"
    },
    "symmetry": {
      "mechanical_parts": true,
      "organic_parts": false
    }
  },

  "scale": {
    "unit": "1 unit = 1 block = 1 meter",
    "categories": {
      "single_block_machine": { "size": [1.0, 1.0, 1.0] },
      "handheld_item": { "size": [0.3, 0.3, 0.3] },
      "dropped_item": { "size": [0.4, 0.4, 0.4] },
      "player": { "size": [0.6, 1.8, 0.6] }
    }
  },

  "origin": {
    "machines": {
      "position": "bottom_center",
      "coordinates": [0, 0, 0],
      "forward": "+Z"
    },
    "items": {
      "position": "center",
      "forward": "+Z"
    },
    "multiblock": {
      "position": "master_block_bottom_center",
      "forward": "+Z"
    }
  },

  "polygon_budget": {
    "triangles": {
      "handheld_item": { "recommended": [50, 200], "max": 500 },
      "dropped_item": { "recommended": [20, 100], "max": 200 },
      "single_block_machine": { "recommended": [200, 800], "max": 1500 },
      "multiblock_small": { "recommended": [500, 2000], "max": 4000 },
      "multiblock_large": { "recommended": [2000, 5000], "max": 10000 }
    },
    "lod": {
      "lod0": { "ratio": 1.0, "distance": [0, 50] },
      "lod1": { "ratio": 0.5, "distance": [50, 150] },
      "lod2": { "ratio": 0.25, "distance": [150, 300] }
    }
  },

  "materials": {
    "shading": "flat",
    "pbr": {
      "supported": ["base_color", "metallic", "roughness", "normal", "emissive", "occlusion"]
    },
    "presets": {
      "iron": { "base_color": "#4A4A4A", "metallic": 1.0, "roughness": [0.4, 0.6] },
      "copper": { "base_color": "#B87333", "metallic": 1.0, "roughness": [0.3, 0.5] },
      "brass": { "base_color": "#C9A227", "metallic": 1.0, "roughness": [0.3, 0.5] },
      "dark_steel": { "base_color": "#2D2D2D", "metallic": 1.0, "roughness": [0.5, 0.7] },
      "wood": { "base_color": "#8B6914", "metallic": 0.0, "roughness": [0.7, 0.9] },
      "stone": { "base_color": "#696969", "metallic": 0.0, "roughness": [0.6, 0.8] }
    },
    "accent_colors": {
      "danger": "#CC3333",
      "warning": "#CCAA33",
      "power": "#3366CC",
      "active": "#33CC66"
    },
    "vertex_color_shading": {
      "enabled": true,
      "edge_darkening": 0.85,
      "comment": "エッジ付近を暗くして立体感を出す"
    }
  },

  "textures": {
    "resolution": {
      "item_icon": [64, 128],
      "machine": [256, 512],
      "large_structure": [512, 1024]
    },
    "uv": { "range": [0, 1], "padding_px": 4 },
    "naming": "{model_name}_{texture_type}.png"
  },

  "mechanical_parts": {
    "gear": { "base_shape": "octagon", "teeth_shape": "trapezoid", "teeth_count": [8, 12, 16], "hole_shape": "octagon" },
    "pipe": { "cross_section": "octagon", "joint_style": "flanged" },
    "shaft": { "cross_section": "octagon", "end_style": "chamfered" },
    "bolt": { "head_shape": "hexagon", "sizes": [0.0625, 0.125] },
    "rivet": { "shape": "octagonal_dome", "size": 0.0625 },
    "wheel": { "rim_shape": "octagon", "spoke_count": [4, 6, 8] },
    "belt": { "style": "flat_segments", "segment_count_per_unit": 8 },
    "piston": { "rod_shape": "octagonal_prism", "head_shape": "chamfered_cube" },
    "fan_blade": { "shape": "trapezoid", "count": [4, 6, 8] }
  },

  "connection_system": {
    "description": "パイプ・コンベア等の接続面設計ルール",
    "faces": {
      "front": [0, 0, 1],
      "back": [0, 0, -1],
      "left": [-1, 0, 0],
      "right": [1, 0, 0],
      "top": [0, 1, 0],
      "bottom": [0, -1, 0]
    },
    "flange": {
      "radius_ratio": [1.2, 1.4],
      "thickness": [0.02, 0.03],
      "bolt_count": [4, 6],
      "bolt_shape": "octagon",
      "position": "block_boundary"
    },
    "types": {
      "pipe_straight": { "faces": ["front", "back"], "default_radius": 0.15 },
      "pipe_elbow": { "faces": ["front", "right"], "angle": 90 },
      "pipe_tee": { "faces": ["front", "back", "right"] },
      "pipe_cross": { "faces": ["front", "back", "left", "right"] },
      "conveyor_straight": { "faces": ["front", "back"], "width": 0.8 },
      "conveyor_curve": { "faces": ["front", "right"], "angle": 90 },
      "power_cable": { "faces": "variable", "max_connections": 6 }
    }
  },

  "implemented_models": {
    "tools": {
      "description": "実装済みツール",
      "items": [
        { "name": "pickaxe", "file": "pickaxe.gltf", "status": "done" },
        { "name": "hammer", "file": "hammer.gltf", "status": "done" }
      ]
    },
    "machines": {
      "description": "実装済み機械（接続面対応済みは★マーク）",
      "items": [
        { "name": "furnace", "file": "furnace.gltf", "connections": ["front", "back"], "status": "★done" },
        { "name": "conveyor", "file": "conveyor.gltf", "connections": ["front", "back"], "status": "★done" },
        { "name": "crusher", "file": "crusher.gltf", "status": "done" },
        { "name": "press", "file": "press.gltf", "status": "done" },
        { "name": "pump", "file": "pump.gltf", "connections": ["left", "top"], "status": "★done" },
        { "name": "tank", "file": "tank.gltf", "connections": ["right"], "status": "★done" },
        { "name": "miner", "file": "miner.gltf", "status": "done" },
        { "name": "assembler", "file": "assembler.gltf", "status": "done" },
        { "name": "mixer", "file": "mixer.gltf", "connections": ["right", "bottom"], "status": "★done" },
        { "name": "centrifuge", "file": "centrifuge.gltf", "status": "done" },
        { "name": "generator", "file": "generator.gltf", "status": "done" },
        { "name": "chemical_reactor", "file": "chemical_reactor.gltf", "connections": ["top", "right"], "status": "★done" },
        { "name": "solar_panel", "file": "solar_panel.gltf", "status": "done" },
        { "name": "coal_generator", "file": "coal_generator.gltf", "status": "done" },
        { "name": "fuel_generator", "file": "fuel_generator.gltf", "status": "done" },
        { "name": "nuclear_reactor", "file": "nuclear_reactor.gltf", "status": "done" },
        { "name": "color_router", "file": "color_router.gltf", "status": "done" },
        { "name": "signal_transmitter", "file": "signal_transmitter.gltf", "status": "done" },
        { "name": "signal_receiver", "file": "signal_receiver.gltf", "status": "done" },
        { "name": "creature_feeder", "file": "creature_feeder.gltf", "status": "done" },
        { "name": "breeding_station", "file": "breeding_station.gltf", "status": "done" },
        { "name": "creature_transport", "file": "creature_transport.gltf", "status": "done" },
        { "name": "train_engine", "file": "train_engine.gltf", "status": "done" },
        { "name": "cargo_wagon", "file": "cargo_wagon.gltf", "status": "done" }
      ]
    },
    "structures": {
      "description": "実装済み構造物",
      "items": [
        { "name": "train_station", "file": "train_station.gltf", "status": "done" },
        { "name": "creature_pen", "file": "creature_pen.gltf", "status": "done" }
      ]
    }
  },

  "pending_items": {
    "priority_1_tools": {
      "description": "未実装ツール",
      "items": [
        { "name": "axe", "triangles": [100, 150], "notes": "片側刃" },
        { "name": "wrench", "triangles": [80, 100], "notes": "開いた口" },
        { "name": "shovel", "triangles": [80, 120], "notes": "平らな刃" }
      ]
    },
    "priority_2_pipes": {
      "description": "パイプ系（接続面必須）",
      "items": [
        { "name": "pipe_straight", "triangles": [100, 200], "connections": ["front", "back"] },
        { "name": "pipe_elbow", "triangles": [150, 250], "connections": ["front", "right"] },
        { "name": "pipe_tee", "triangles": [200, 300], "connections": ["front", "back", "right"] },
        { "name": "pipe_cross", "triangles": [250, 350], "connections": ["front", "back", "left", "right"] }
      ]
    },
    "priority_3_storage": {
      "description": "収納・インフラ",
      "items": [
        { "name": "chest", "triangles": [150, 250], "animation": "lid_open" },
        { "name": "large_chest", "triangles": [200, 350], "notes": "2ブロックサイズ" },
        { "name": "shaft", "triangles": [100, 200], "connections": ["front", "back"], "animation": "rotate" },
        { "name": "gearbox", "triangles": [300, 500], "connections": ["front", "back", "left", "right"] }
      ]
    },
    "priority_4_structures": {
      "description": "未実装構造物",
      "items": [
        { "name": "workbench", "triangles": [200, 400] },
        { "name": "storage_shelf", "triangles": [150, 300] }
      ]
    }
  },

  "bones": {
    "max_count": 30,
    "root_required": true,
    "root_names": ["root", "armature"],
    "naming": "{function}_{part}_{number}",
    "examples": ["press_head", "crusher_wheel", "mixer_blade_01", "conveyor_roller_01"],
    "transform": { "allowed": ["rotation", "translation"], "discouraged": ["scale"] }
  },

  "animation": {
    "fps": 30,
    "naming": { "loop": "{action}_cycle", "oneshot": "{action}_once" },
    "examples": ["press_cycle", "crush_cycle", "saw_spin", "door_open_once"],
    "style": { "motion_type": "mechanical", "easing": "linear", "comment": "機械的な動きはリニア補間を基本に" }
  },

  "export": {
    "format": "gltf_separate",
    "extensions": [".gltf", ".bin"],
    "settings": {
      "y_up": true,
      "apply_modifiers": true,
      "uvs": true,
      "normals": true,
      "tangents": true,
      "vertex_colors": "optional",
      "materials": "export",
      "animations": "if_present",
      "sampling_rate": 30
    },
    "checklist": [
      "スケール適用済み",
      "回転適用済み",
      "原点位置が正しい",
      "UV展開が0-1範囲内",
      "マテリアル設定済み",
      "不要な頂点・面を削除"
    ]
  },

  "file_structure": {
    "models": {
      "machines": "assets/models/machines/",
      "items": "assets/models/items/",
      "structures": "assets/models/structures/"
    },
    "textures": "assets/textures/"
  },

  "validation": {
    "tool": "glTF Validator",
    "url": "https://github.khronos.org/glTF-Validator/"
  }
}
