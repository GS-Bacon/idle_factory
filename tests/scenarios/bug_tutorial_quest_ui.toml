# BUG-879db5a: チュートリアル中にクエストUIが表示される問題
# チュートリアル中はQuestPanelが非表示、TutorialPanelが表示であることを確認

name = "Bug Regression: Tutorial blocks Quest UI"
description = "チュートリアル中はQuestPanel非表示、TutorialPanel表示を検証"

# Step 1: 初期状態を取得
[[steps]]
action = "get_state"

# Step 2: Gameplay状態であることを確認
[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

[[steps]]
action = "wait"
params = { ms = 200 }

# Step 3: チュートリアル中なのでQuestPanelが非表示であることを確認
[[steps]]
action = "assert"
params = { condition = "no_ui_element == QuestPanel" }

# Step 4: チュートリアル中なのでTutorialPanelが表示されていることを確認
[[steps]]
action = "assert"
params = { condition = "has_ui_element == TutorialPanel" }

# Step 5: スクリーンショットを撮影
[[steps]]
action = "screenshot"
params = { name = "tutorial_no_quest_ui" }

# Step 6: Qキーでクエスト画面トグルを試みる（チュートリアル中はブロックされるはず）
[[steps]]
action = "send_input"
params = { action = "ToggleQuest" }

[[steps]]
action = "wait"
params = { ms = 100 }

# Step 7: まだGameplay状態のままであることを確認
[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

# Step 8: QuestPanelはまだ非表示のままであることを確認
[[steps]]
action = "assert"
params = { condition = "no_ui_element == QuestPanel" }
