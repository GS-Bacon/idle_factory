# UI表示時のカーソルロック状態テスト
# バグ #10, #12 関連

name = "UI表示時のカーソルロック状態"
description = "インベントリ表示中はカーソルロックが解除されることを確認"

# 初期状態: ゲームプレイ中、カーソルロック
[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

[[steps]]
action = "assert"
params = { condition = "cursor_locked == true" }

# インベントリを開く
[[steps]]
action = "send_input"
params = { action = "ToggleInventory" }

[[steps]]
action = "wait"
params = { ms = 100 }

# インベントリ表示中はカーソルロック解除
[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Inventory" }

[[steps]]
action = "assert"
params = { condition = "cursor_locked == false" }

# インベントリを閉じる
[[steps]]
action = "send_input"
params = { action = "ToggleInventory" }

[[steps]]
action = "wait"
params = { ms = 100 }

# ゲームプレイに戻り、カーソルロック復帰
[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

[[steps]]
action = "assert"
params = { condition = "cursor_locked == true" }
