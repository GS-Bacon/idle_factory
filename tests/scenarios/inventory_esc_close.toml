# インベントリをESCで閉じるテスト
# バグ #10 関連: UI表示中にESCで閉じられることを確認

name = "インベントリをESCで閉じる"
description = "インベントリ表示中にESCで閉じてゲームプレイに戻れることを確認"

# 初期状態: ゲームプレイ中
[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

# インベントリを開く（Eキー）
[[steps]]
action = "send_input"
params = { action = "ToggleInventory" }

[[steps]]
action = "wait"
params = { ms = 100 }

[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Inventory" }

# ESCで閉じる（Cancel）
[[steps]]
action = "send_input"
params = { action = "Cancel" }

[[steps]]
action = "wait"
params = { ms = 100 }

[[steps]]
action = "get_state"

# ESCでインベントリが閉じてゲームプレイに戻る
[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

# カーソルロックも復帰
[[steps]]
action = "assert"
params = { condition = "cursor_locked == true" }
