name = "UIスタック検証: 単一UI"
description = "UIを開いたとき、スタックに1つだけ積まれ、他のUIが含まれていないことを確認"

# 初期状態確認
[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

[[steps]]
action = "assert"
params = { condition = "stack_depth == 0" }

# インベントリを開く
[[steps]]
action = "send_input"
params = { action = "ToggleInventory" }

[[steps]]
action = "wait"
params = { ms = 100 }

# インベントリ状態確認
[[steps]]
action = "assert"
params = { condition = "ui_state == Inventory" }

[[steps]]
action = "assert"
params = { condition = "stack_depth == 1" }

# 他のUIが含まれていないことを確認
[[steps]]
action = "assert"
params = { condition = "ui_stack not_contains Settings" }

[[steps]]
action = "assert"
params = { condition = "ui_stack not_contains PauseMenu" }

[[steps]]
action = "assert"
params = { condition = "ui_stack not_contains MachineUI" }

# インベントリが含まれていることを確認
[[steps]]
action = "assert"
params = { condition = "ui_stack contains Inventory" }

# 後片付け
[[steps]]
action = "set_ui_state"
params = { state = "Gameplay" }
