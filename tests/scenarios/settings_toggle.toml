name = "設定画面の開閉"
description = "設定画面を開きESCで閉じる"

# 初期状態確認
[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

# 設定画面を開く
[[steps]]
action = "set_ui_state"
params = { state = "Settings" }

[[steps]]
action = "wait"
params = { ms = 100 }

[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Settings" }

[[steps]]
action = "assert"
params = { condition = "cursor_locked == false" }

# ESCで閉じる（set_ui_stateはスタッククリアするのでGameplayに戻る）
[[steps]]
action = "send_input"
params = { action = "Cancel" }

[[steps]]
action = "wait"
params = { ms = 100 }

[[steps]]
action = "get_state"

[[steps]]
action = "assert"
params = { condition = "ui_state == Gameplay" }

[[steps]]
action = "assert"
params = { condition = "cursor_locked == true" }
