# 新操作仕様（CADスタイル）

## 概要

FPSスタイルからCADスタイルへ移行。サバイバル要素を廃止し、ファクトリー構築に特化。

## カメラ・移動

| 操作 | 動作 |
|------|------|
| WASD | 飛行移動（衝突なし） |
| Space | 上昇 |
| Shift | 下降 |
| 中ボタン + ドラッグ | 視点回転 |
| Alt + 左ドラッグ | 視点回転（代替） |
| カーソル | 常時表示 |
| スクロール | なし（ズーム無効） |

## ブロック操作

| 操作 | 動作 |
|------|------|
| 左クリック | 撤去（即時、ポイント返還） |
| 右クリック | 設置（即時、ポイント消費） |
| 設定 | 左右入れ替え可能 |

### 機械UI
- 設置後に機械をクリック → レシピ選択UIを表示

## 設置モード

### カテゴリ切替
| キー | カテゴリ | 内容 |
|------|---------|------|
| K | 物流 | コンベア、スプリッター、マージャー |
| P | 生産 | 採掘機、製錬炉、破砕機 |
| L | 電力 | 発電機、電線、バッテリー |
| B | 建築 | 床、壁、柱 |

### カテゴリ内選択
- 数字キー（1-9）で選択
- 画面下部パレットをクリックでも選択可

### パレットUI
```
┌─────────────────────────────────────────────┐
│ [K] 物流                                    │
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐                    │
│ │ 1 │ │ 2 │ │ 3 │ │ 4 │  ...               │
│ │コン│ │スプ│ │マー│ │   │                    │
│ └───┘ └───┘ └───┘ └───┘                    │
│                              ポイント: 1250 │
└─────────────────────────────────────────────┘
```

## ポイントシステム

### 基本ルール
| 項目 | 内容 |
|------|------|
| 単位 | 単一ポイント |
| 初期値 | TBD（適当に付与） |
| 獲得 | クエスト納品・進行報酬 |
| 表示 | パレットUI右下に残高表示 |

### コスト設定（例）
| アイテム | コスト | 備考 |
|----------|--------|------|
| コンベア | 0 | 無料（詰み防止） |
| スプリッター | 2 | |
| マージャー | 2 | |
| 採掘機 | 5 | |
| 製錬炉 | 10 | |
| 破砕機 | 8 | |
| 電力ワイヤ | 4 | |
| 発電機 | 15 | |

### 撤去返還
| 難易度 | 返還率 |
|--------|--------|
| イージー | 100% |
| ノーマル | 100%（デフォルト） |
| ハード | 50%（将来実装） |

## 廃止する機能

| 機能 | 理由 |
|------|------|
| 手持ちインベントリ | 直接設置に移行 |
| クラフト | 不要 |
| アイテム拾い | コンベアで流すだけ |
| サバイバルモード | 衝突・重力・ジャンプ不要 |
| カーソルロック | 常時表示に |
| 破壊時間 | 即時撤去に |
| スクロールズーム | 不要 |

## 残す機能

| 機能 | 変更点 |
|------|--------|
| コンベア上のアイテム | 流れるだけ（拾えない） |
| 機械レシピ設定 | 設置後クリックでUI |
| クエスト進捗 | 納品カウントで自動完了 |

## 納品システム変更

### 現状
```
コンベア → 納品プラットフォーム → PlatformInventory蓄積 → 手動納品ボタン → ポイント獲得
```

### 新仕様
```
コンベア → 納品プラットフォーム → 即ポイント化 + クエスト進捗更新
```

- アイテムがプラットフォームに到達した時点で即座にポイント化
- **PlatformInventory廃止**（蓄積なし、Shapez 2式）
- クエスト進捗は別途カウント（QuestProgress リソース）
- クエスト完了時に追加報酬ポイント

## 実装タスク

### Phase 1: 操作系変更
- [ ] カーソルロック廃止（常時表示）
- [ ] 中ボタンドラッグで視点回転
- [ ] Alt+左ドラッグ対応
- [ ] サバイバルモード削除（飛行のみ、衝突なし）
- [ ] スクロールズーム無効化

### Phase 2: ブロック操作変更
- [ ] 破壊時間廃止→即時撤去
- [ ] 左=撤去、右=設置に変更
- [ ] 設定で左右入れ替え

### Phase 3: 設置モードUI
- [ ] カテゴリキー実装（K/P/L/B）
- [ ] 数字キーでカテゴリ内選択
- [ ] 画面下部パレットUI
- [ ] パレットクリック対応

### Phase 4: ポイントシステム
- [ ] ポイントリソース追加
- [ ] 設置時コスト消費
- [ ] 撤去時ポイント返還
- [ ] 残高UI表示
- [ ] クエスト報酬でポイント付与

### Phase 5: 既存機能削除
- [ ] 手持ちインベントリ削除
- [ ] クラフトシステム削除
- [ ] アイテム拾い削除
- [ ] ホットバー削除

### Phase 6: 調整
- [ ] 初期ポイント設定
- [ ] 各アイテムのコスト調整
- [ ] 難易度設定（返還率）
