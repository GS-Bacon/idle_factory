# Game Development Design Patterns Skill

このスキルは、ゲーム開発における設計判断を支援するために使用します。

## 使用タイミング

- 新機能の設計時
- コードレビュー時
- アーキテクチャ決定時
- 問題解決時

---

## 参照すべきドキュメント

### デザインパターン集
`.specify/memory/design-patterns.md` を参照し、以下のパターンを確認：

| カテゴリ | パターンID | 用途 |
|---------|-----------|------|
| 進行設計 | P1-P4 | ゲーム進行、難易度曲線 |
| レシピ設計 | R1-R4 | クラフトシステム |
| クエスト設計 | Q1-Q4 | ミッション、チュートリアル |
| UI/UX | U1-U4 | インターフェース設計 |
| エディタ | E1-E6 | ツールUI設計 |
| テスト | T1-T4 | テスト戦略 |
| サウンド | S1-S4 | オーディオ実装 |
| グラフィック | G1-G4 | レンダリング最適化 |
| ネットワーク | N1-N4 | マルチプレイ設計 |
| セキュリティ | C1-C3 | チート対策 |
| MOD API | M1-M3 | MODシステム設計 |
| レベルデザイン | L1-L3 | ワールド・進行設計 |
| Bevy ECS | B1-B3 | ECSアーキテクチャ |
| Rust | RS1-RS3 | Rustベストプラクティス |
| アクセシビリティ | A1-A3 | 障害対応 |
| ローカライズ | I1-I2 | 多言語対応 |

---

## 機能別ガイド

### マルチプレイヤー実装時
1. `.specify/specs/multiplayer-networking-best-practices.md` を確認
2. パターン N1-N4 を適用
3. アンチパターン（クライアント信頼、同期ズレ放置）を回避

**必須チェック:**
- [ ] サーバー権威アーキテクチャか
- [ ] クライアント予測があるか
- [ ] 差分圧縮を使用しているか
- [ ] 再接続処理があるか

### セキュリティ実装時
1. `.specify/specs/security-anticheat-best-practices.md` を確認
2. パターン C1-C3 を適用

**必須チェック:**
- [ ] 全入力をサーバーでバリデーションしているか
- [ ] セーブデータは暗号化されているか
- [ ] 統計的異常検知があるか

### UI/HUD実装時
1. `.specify/specs/game-ui-hud-best-practices.md` を確認
2. パターン U1-U4, E1-E6 を適用

**必須チェック:**
- [ ] 情報階層が適切か
- [ ] 全操作にフィードバックがあるか
- [ ] ツールチップがあるか

### MOD API設計時
1. `.specify/specs/mod-development-best-practices.md` を確認
2. パターン M1-M3 を適用（Factorioモデル）

**必須チェック:**
- [ ] データライフサイクルが明確か
- [ ] サンドボックス化されているか
- [ ] APIバージョニングがあるか

### レベルデザイン/進行設計時
1. `.specify/specs/level-design-progression-best-practices.md` を確認
2. パターン L1-L3, P1-P4 を適用

**必須チェック:**
- [ ] 進行フェーズが明確か
- [ ] 待機時間に代替タスクがあるか
- [ ] 探索に報酬があるか

### Bevy ECS設計時
1. `.specify/specs/bevy-ecs-best-practices.md` を確認
2. パターン B1-B3 を適用

**必須チェック:**
- [ ] コンポーネントは小さく分割されているか
- [ ] システム順序が明示されているか
- [ ] Changed/Addedを活用しているか

### パフォーマンス最適化時
1. `.specify/specs/graphics-implementation-best-practices.md` を確認
2. `.specify/specs/rust-gamedev-best-practices.md` を確認
3. パターン G1-G4, RS1-RS3 を適用

**必須チェック:**
- [ ] インスタンシングを活用しているか
- [ ] 不要なアロケーションを避けているか
- [ ] シェーダープリコンパイルがあるか

### サウンド実装時
1. `.specify/specs/sound-implementation-best-practices.md` を確認
2. パターン S1-S4 を適用

**必須チェック:**
- [ ] ミキシング優先度があるか
- [ ] 反復疲労防止（バリエーション）があるか
- [ ] カテゴリ別ボリュームスライダーがあるか

### アクセシビリティ対応時
1. `.specify/specs/accessibility-localization-best-practices.md` を確認
2. パターン A1-A3, I1-I2 を適用

**必須チェック:**
- [ ] 色覚モードがあるか
- [ ] 字幕があるか
- [ ] キーリマップ可能か
- [ ] 文字列が外部化されているか

---

## 評価テンプレート

設計レビュー時は `design-patterns.md` の評価テンプレートを使用：

- Part 8: レシピ/クエスト評価テンプレート
- Part 11: テスト評価テンプレート
- Part 14: サウンド評価テンプレート
- Part 17: グラフィック評価テンプレート
- Part 28: マルチプレイヤー/アクセシビリティ評価テンプレート

---

## アンチパターン速見

問題が発生したら以下を確認：

| 症状 | 確認するアンチパターン表 |
|------|-------------------------|
| FPS低下 | Part 16: グラフィックアンチパターン |
| 音が聞こえにくい | Part 13: サウンドアンチパターン |
| チート発生 | Part 21: セキュリティアンチパターン |
| 同期ズレ | Part 19: マルチプレイヤーアンチパターン |
| UIが使いにくい | Part 7: エディタアンチパターン |
| テスト不安定 | Part 10: テストアンチパターン |

---

## 実装優先順位ガイド

### 必須（リリース前）
- サーバー権威アーキテクチャ
- 基本的な入力バリデーション
- 字幕オプション
- キーリマップ
- セーブデータ暗号化

### 推奨
- クライアント予測
- 色覚モード
- カテゴリ別音量スライダー
- LODシステム
- シェーダープリコンパイル

### 上級
- ロールバックネットコード
- 統計的異常検知
- 視覚的音響表示
- 完全キーボード操作

---

*このスキルは `.specify/memory/design-patterns.md` と `.specify/specs/` 内のレポートに基づいています。*
