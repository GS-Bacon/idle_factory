# 実装ロードマップ

> 詳細な設計は `.claude/architecture-future.md` 参照
> タスク詳細は `.claude/implementation-plan.md` 参照

## 現在の状態

> **最新の数値は `CLAUDE.md` の「現在の状態」を参照**

---

## マイルストーン概要

```
M0: 基盤整備             ✅ 完了 (Component化、動的ID、イベント)
        ↓
M1: Data Mod完成         ✅ 完了 (TOML読み込み)
        ↓
M2: Core Mod基盤         ✅ 完了 (2026-01-09)
        ↓
    技術的負債解消       ← 今ここ (UI.1, N.1等)
        ↓
M3: 電力システム         リソースネットワーク実装
        ↓
M4: 液体・信号           同パターンで拡張
        ↓
M4.5: ツール・ビジュアル  レシピエディタ、見た目強化
        ↓
M5: ゲーム完成           コンテンツ充実
        ↓
M6: マルチプレイ         最後
```

---

## M0: 基盤整備 ✅ 完了

**目標**: マルチプレイ・Mod対応の基盤を整える

| 成果物 | 状態 |
|--------|------|
| LocalPlayer Entity化 | ✅ 完了 |
| PlayerInventory Component化 | ✅ 完了 |
| BlockType→ItemId移行 | ✅ 完了 |
| イベントシステム | ✅ 完了 |
| パニック防止 | ✅ 完了 |

**技術的成果**: マルチプレイ対応の下地、動的ID基盤

---

## M1: Data Mod完成 ✅

**目標**: TOMLでアイテム・機械・レシピを追加できる

| 成果物 | 状態 |
|--------|------|
| TOML読み込み基盤 | ✅ 完了 |
| 新アイテム追加（コード変更なし） | ✅ 完了 |
| 新機械追加（既存ロジック） | ✅ 完了 |
| 新レシピ追加 | ✅ 完了 |

**遊べること**: バニラの精錬・粉砕・組立が動く

---

## M2: Core Mod基盤 ✅ 完了 (2026-01-09)

**目標**: WASMで新しいゲームロジックを追加できる

| 成果物 | 状態 |
|--------|------|
| Wasmtime統合 | ✅ 完了 |
| Mod API設計（ホスト関数） | ✅ 完了 |
| サンプルCore Mod作成 | ✅ 完了 |
| タグシステム | ✅ 完了 |

**遊べること**: WASMでゲームロジックを拡張可能

---

## M2→M3: 技術的負債解消 ← 今ここ

**目標**: M3以降の実装を効率化する基盤改善

| タスク | 内容 | 状態 |
|--------|------|------|
| UI.1 | UI Visibilityシステム改善 | ✅ 完了 |
| N.1-N.5 | リソースネットワーク基盤 | ✅ 完了 (2026-01-09) |
| API Wiki | ドキュメント自動生成 | ✅ 完了 |

**詳細は** `.claude/implementation-plan.md` 参照

---

## M3: 電力システム

**目標**: 発電機→電線→機械の電力供給

| タスク | 内容 | 状態 |
|--------|------|------|
| P.1 | 電力グリッド計算 | ✅ 完了 (N.1-N.5で実装) |
| P.2 | 発電機（水車、石炭発電） | 🔨 基盤あり (generator定義済み) |
| P.3 | 電線ブロック | ✅ 完了 (wire追加済み) |
| P.4 | 電力消費機械 | ❌ 未着手 |
| P.5 | 電力UI | ❌ 未着手 |

**遊べること**: 電力管理が必要なファクトリーゲーム

---

## M4: 液体・信号

**目標**: パイプで液体、ワイヤーで信号を流す

| タスク | 内容 | 状態 |
|--------|------|------|
| F.1-F.3 | 液体システム（パイプ、ポンプ、タンク） | 🔨 基盤あり (pipe追加済み) |
| S.1-S.3 | 信号システム（ワイヤー、センサー、論理ゲート） | 🔨 基盤あり (signal_wire追加済み) |

**遊べること**: 複雑な自動化、条件分岐

---

## M4.5: ツール・ビジュアル強化

**目標**: 開発効率とゲームの見た目向上

| カテゴリ | 内容 | 状態 |
|----------|------|------|
| ツール | レシピエディタ（WebUI） | ❌ 未着手 |
| ビジュアル | ライティング、ポストプロセス | ❌ 未着手 |
| ビジュアル | 機械アニメーション、パーティクル | ❌ 未着手 |
| サウンド | 効果音、BGM | ❌ 未着手 |

---

## M5: ゲーム完成

**目標**: 製品版として遊べる状態

| カテゴリ | 内容 | 状態 |
|----------|------|------|
| コンテンツ | 機械50種類以上、レシピ100種類以上 | ❌ |
| UI/UX | マップ、ブループリント、統計 | ❌ |
| 完成度 | 実績システム | ❌ |

**M5完了時**: リポジトリ名を `riso-factory` に変更

**遊べること**: 10時間以上遊べるファクトリーゲーム

---

## M6: マルチプレイ

**目標**: 複数プレイヤーで協力プレイ

**前提条件**: ✅ 全て完了済み（Component化、Entity化、NetworkId、イベント）

| タスク | 内容 | 状態 |
|--------|------|------|
| Net.1-Net.4 | P2P接続、状態同期、権限、ロビー | ❌ 未着手 |

**遊べること**: フレンドと一緒に工場建設

---

## 依存関係図

```
M0: 基盤 ✅ ─→ M1: Data Mod ✅ ─→ M2: Core Mod ✅
                                        │
                            ┌───────────┼───────────┐
                            ▼           ▼           ▼
                       M3: 電力     M4: 液体    M4: 信号
                            │           │           │
                            └───────────┴───────────┘
                                        │
                                        ▼
                                M4.5: ツール・ビジュアル
                                        │
                                        ▼
                                  M5: ゲーム完成
                                        │
                                        ▼
                                  M6: マルチプレイ
```

---

*最終更新: 2026-01-09*
