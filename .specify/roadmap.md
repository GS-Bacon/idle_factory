# 実装ロードマップ

> 詳細な設計は `.claude/architecture-future.md` 参照

## 現在の状態

| 項目 | 値 |
|------|-----|
| コード行数 | ~19,000行 |
| テスト | 344件 |
| Clippy警告 | 0件 |
| Phase | C 完了 → D 準備中 |

## Phase D: 基盤強化（最優先）

**これらは機能追加より先にやる。後からは困難。**

| # | タスク | 内容 | 状態 |
|---|--------|------|------|
| D.0 | **マルチ準備** | PlayerInventory Component化 + MachineBundle + 安全API | ⚠️ 最優先 |
| D.1 | **イベントシステム** | Bevy Observer + 全フック | 未着手 |
| D.2 | **動的ID** | Phantom Type + StringInterner | 未着手 |
| D.3 | **Mod API Server** | WebSocket/JSON-RPC | 未着手 |
| D.4 | **データ駆動Mod** | TOML/JSONでコンテンツ追加 | 未着手 |
| D.5 | **Blockbenchローダー** | .bbmodel直接読み込み | 未着手 |

## 独立機能（Phase D完了後、並行可）

| # | 機能 | 概要 | 既存影響 |
|---|------|------|----------|
| 1 | マップ機能 | ワールド俯瞰表示 | 低 |
| 2 | ブループリント | 配置パターン保存・再利用 | 低 |
| 3 | クラフトシステム | プレイヤー手動クラフト | 中 |
| 4 | ストレージ | 大容量倉庫、フィルター | 中 |
| 5 | 統計・分析 | 生産量グラフ、ボトルネック | 低 |
| 6 | サウンド | BGM、効果音、環境音 | 低 |
| 7 | 実績システム | Steam実績連携 | 低 |
| 8 | プレイヤースキン | マイクラ風見た目変更 | 低 |
| 9 | ロボット | データ駆動プログラム | 中 |

## 基盤システム（Mod API対応しながら）

| # | 機能 | 依存 |
|---|------|------|
| 10 | 電力システム | D.1 イベント |
| 11 | 液体・気体 | 電力と同パターン |
| 12 | 信号制御 | 電力・流体 |
| 13 | 線路機能 | 信号制御 |
| 14 | Mob追加 | イベントシステム |

## 最後

| # | 機能 | 理由 |
|---|------|------|
| 15 | マルチプレイ本実装 | D.0-D.2が前提 |

---

## 依存関係

```
D.0 PlayerInventory Component化
    ↓
D.1 イベントシステム
    ↓
D.2 動的ID
    ↓
D.3-D.5 Mod基盤
    ↓
独立機能（並行可）
    ↓
基盤システム（電力→液体→信号→線路）
    ↓
マルチプレイ本実装
```

---

## 機械リスト（将来実装予定）

### 採掘・加工

| 機械 | 概要 |
|------|------|
| 採掘機 | 鉱石を自動採掘、Tier 1-3 |
| 精錬炉 | 鉱石→インゴット |
| 粉砕機 | 鉱石→粉（効率UP） |
| プレス機 | インゴット→板/ワイヤー |
| 組立機 | 複数素材→製品 |
| ミキサー | 液体+固体の混合 |
| 遠心分離機 | 混合物の分離 |
| 化学プラント | 液体/ガスの反応 |

### 物流

| 機械 | 概要 |
|------|------|
| コンベア | アイテム輸送、Tier 1-4 |
| スプリッター | 分配（基本/スマート/プログラマブル） |
| パイプ | 液体輸送 |
| ポンプ | 揚程追加 |
| タンク | 液体貯蔵 |
| チェスト類 | 基本/プロバイダー/リクエスター等 |

### 電力

| 機械 | 概要 |
|------|------|
| 水車 | 10kW、序盤電源 |
| 風車 | 5-20kW、高度依存 |
| ソーラー | 30kW（昼のみ） |
| 石炭発電 | 75kW |
| 燃料発電 | 250kW |
| 原子力 | 2500kW、マルチブロック |
| 導管 | EnderIO風、複合配線 |

### 制御・自動化

| 機械 | 概要 |
|------|------|
| サーキットブレーカー | 過負荷遮断 |
| パワースイッチ | 手動ON/OFF |
| 信号送受信機 | ワイヤレス16ch |
| ロボポート | ロボット管理 |
| 物流ロボ | アイテム運搬 |
| 建設ロボ | 設置・撤去 |

### 輸送

| 機械 | 概要 |
|------|------|
| 列車 | 長距離輸送 |
| 貨物ワゴン | 40スロット |
| 駅 | 積み下ろし |

---

## 完了済みPhase

| Phase | 内容 | 完了日 |
|-------|------|--------|
| A | v0.2完成（チュートリアル、バイオームUI、UIテーマ） | - |
| B | アーキテクチャ再設計（物流分離、機械統合、UI統合） | - |
| C | データ駆動設計（BlockDescriptor, GameRegistry） | 2026-01-07 |

---

*最終更新: 2026-01-07*
