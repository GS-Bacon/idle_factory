# 課題管理

未解決の課題・TODO・改善案を記録。

---

## 未解決

### 無限ワールド生成の改善
**日付**: 2025-12-25
**優先度**: 中
**カテゴリ**: ゲームプレイ

**現状**:
- Perlinノイズによる基本的な地形生成は完了
- プレイヤー周囲4チャンク（128ブロック）を自動生成
- 非同期処理でスムーズな生成

**今後の実装予定**:

| 優先度 | 機能 | 詳細 |
|--------|------|------|
| 高 | スポーン位置最適化 | 地形高さを検出してプレイヤーを安全な位置にスポーン |
| 高 | 草ブロック追加 | 地表を草で覆う（現在はdirtのみ） |
| 中 | 地形バリエーション | 砂、砂利、水、溶岩などのブロック追加 |
| 中 | バイオーム | 地域ごとの異なる地形（森、砂漠、山岳など） |
| 中 | 洞窟生成 | 3Dノイズによる地下洞窟システム |
| 中 | 鉱石分布 | 深さに応じた鉱石の自動配置 |
| 低 | 構造物生成 | 村、ダンジョン、遺跡などの自動配置 |
| 低 | 木・植物 | 地表に木や草花を自動配置 |

**技術的改善**:
- チャンク生成の優先度（プレイヤー視線方向を優先）
- メッシュ最適化（Greedy Meshing）
- チャンクのシリアライズ/デシリアライズ（セーブ対応）

---

### Blender MCP自動起動の課題
**日付**: 2025-12-25
**優先度**: 中
**カテゴリ**: ツール

**問題**:
- Blender MCPアドオンのサーバーは手動起動が必要
- `pkill blender`するとClaude CodeのMCPクライアント（uvx blender-mcp）も終了してしまう
- Blender起動時の自動サーバー起動が不安定

**現状の回避策**:
1. Blenderを手動で起動: `DISPLAY=:10 blender --python tools/blender_autostart_mcp.py &`
2. Blender内でMCPサーバーを起動: N→サイドバー→MCP→Start Server
3. `/generate-model`スキルで接続確認、失敗時は手順を案内

**理想的な解決策**:
- Blender起動時にMCPサーバーを100%自動起動
- または、Blenderをheadlessで実行しサーバーのみ起動

---

### 中優先度システム実装（ゲームリサーチより）
**日付**: 2025-12-25
**優先度**: 中
**カテゴリ**: ゲームプレイ

高優先度システム（9件）は実装完了。以下は今後実装予定の中優先度機能:

| 機能 | 参考ゲーム | 詳細 |
|------|------------|------|
| ヘッドリフト・ポンプシステム | Satisfactory | パイプの高さ制限、ポンプで揚程追加 |
| 発電機ティアシステム | Satisfactory/Factorio | 発電機のグレード・効率段階 |
| クリーチャー自動化 | Palworld | パルのような生き物を工場労働に活用 |
| カラールーティング列車 | Shapez2 | 色ベースの信号で列車を分岐 |
| グローバル信号送受信 | Shapez2 | ワイヤレスでシグナル伝達 |

**必要な3Dモデル（中優先度）**:
- pump.glb - 揚水ポンプ
- coal_generator.glb - 石炭発電機
- fuel_generator.glb - 燃料発電機
- nuclear_reactor.glb - 原子炉
- train_engine.glb - 列車機関車
- cargo_wagon.glb - 貨物車両
- train_station.glb - 列車駅
- color_router.glb - カラールーター
- signal_transmitter.glb - 信号送信機
- signal_receiver.glb - 信号受信機
- creature_worker.glb - ワーカークリーチャー
- creature_pen.glb - クリーチャー飼育場
- creature_feeder.glb - 自動エサやり機
- pal_sphere.glb - パルスフィア風捕獲アイテム
- breeding_station.glb - 繁殖ステーション
- creature_transport.glb - クリーチャー輸送機

**関連ファイル**:
- `.specify/memory/feature-roadmap-from-research.md` - 詳細なロードマップ

---

## 完了

### ビルド時SIGSEGV問題
**日付**: 2025-12-24
**優先度**: 高
**カテゴリ**: ビルド

**問題**: rustc SIGSEGVでビルド失敗

**原因**: メモリ不足（VSCode + Claude Code複数プロセスで約4GB使用）

**対策**:
- 開発環境の拡張（RAM増設/スワップ増量）検討
- 使用していないプロセスの終了
- 状況に応じてDocker/リモートビルド

---

*新しい課題は「未解決」セクションに追加*
