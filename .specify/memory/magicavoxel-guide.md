# MagicaVoxel モデリングガイド

## 概要

このガイドはMagicaVoxelを使用してIdle Factoryのゲームモデルを作成する際の手順を説明します。

## セットアップ

1. MagicaVoxelをダウンロード: https://ephtracy.github.io/
2. 解凍して任意の場所に配置
3. MagicaVoxel.exe を起動

## 基本設定

### キャンバスサイズ
- コンベア: 16x16x16 (1ブロック = 16ボクセル)
- 機械（小）: 16x16x16
- 機械（大）: 32x16x32 など

### パレット設定
ゲームのスタイルに合わせたカラーパレット:
- ベルト: #444444 (ダークグレー)
- フレーム: #666666 (グレー)
- ローラー: #222222 (ほぼ黒)
- 矢印マーク: #FFFF00 (黄色)
- 鉄製機械: #8B8B8B
- 銅製機械: #CD7F32

## コンベア作成手順

### 1. straight（直進）
1. 16x16x16のキャンバスを作成
2. 底面にフレーム（枠）を作成: 16x16x2
3. 中央にベルト部分を作成: 10x14x1 (両端2ボクセル空ける)
4. 両端にローラーを追加: 10x2x2
5. 進行方向を示す矢印を黄色で描画

### 2. corner_left（左折）
1. straight を基本に
2. ベルト部分を L字型に変形
3. 角にガイドレールを追加
4. 入り口と出口の向きを確認

### 3. corner_right（右折）
1. corner_left を Y軸でミラー反転

### 4. t_junction（T字分岐）
1. straight を基本に
2. 片側にもう一つの入り口を追加
3. 3方向からのベルトを中央で合流させる

### 5. splitter（三分岐）
1. 入り口1つ、出口3つの形状
2. 中央に分岐ポイントを作成
3. 各出口に矢印マーク

## エクスポート

1. File > Export > glb
2. 保存先: `assets/models/machines/conveyor/`
3. ファイル名: `straight.glb`, `corner_left.glb` など

## 座標系とサイズ

- ゲーム内1ブロック = 1.0単位
- MagicaVoxel 16ボクセル = 1ブロック
- エクスポート時のスケール: 0.0625 (1/16)

## 向きの規則

- デフォルトの進行方向: +Z (北向き)
- 入り口: -Z側（後ろ）
- 出口: +Z側（前）
- 左右: X軸

## チェックリスト

- [ ] サイズが16x16x16に収まっている
- [ ] 進行方向の矢印がある
- [ ] フレームがベルトより高い（アイテムが落ちない）
- [ ] 色がパレットに従っている
- [ ] glb形式でエクスポートした

## トラブルシューティング

### モデルが表示されない
- GlobalTransformとVisibilityコンポーネントが必要
- エクスポート時のスケールを確認

### 向きが逆
- MagicaVoxelの+Z方向とゲームの方向を確認
- 必要に応じて回転を調整

### サイズが合わない
- エクスポート時のスケール設定を確認
- ゲーム内で Transform::from_scale() で調整
