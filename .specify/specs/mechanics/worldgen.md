# ワールド生成

## 概要

無限ワールドにバイオームと資源を配置。
採掘機が無限採掘できる「資源バイオーム」が重要。

## ワールド構造

| 項目 | 値 |
|------|-----|
| 水平方向 | 無限 |
| 垂直方向 | Y: -256 〜 +256（512ブロック） |
| チャンク | 32×32×32 ブロック |
| 生成方式 | Perlinノイズベース |

## バイオーム

### 自然バイオーム

地形と見た目を決定。

| バイオーム | 特徴 | 地形 |
|------------|------|------|
| 平原 | 草地、緩やかな丘 | 平坦 |
| 森林 | 木が多い | 緩やか |
| 砂漠 | 砂、サボテン | 平坦〜砂丘 |
| 山岳 | 岩、雪 | 急峻 |
| 湿地 | 水たまり、粘土 | 平坦、水多め |
| 海洋 | 水 | 水面下 |

### 資源バイオーム

採掘機を置くと無限に資源が取れる。
自然バイオームにオーバーレイされる。

| 資源バイオーム | 資源 | 出現バイオーム |
|----------------|------|----------------|
| 鉄鉱石帯 | 鉄鉱石 | 平原、山岳 |
| 銅鉱石帯 | 銅鉱石 | 森林、砂漠 |
| 石炭層 | 石炭 | どこでも |
| 金鉱脈 | 金鉱石 | 山岳 |
| ウラン鉱床 | ウラン鉱石 | 砂漠（レア） |
| 原油地帯 | 原油 | 砂漠、海洋 |
| 天然ガス | 天然ガス | 湿地 |

### スポーン地点

プレイヤーのスポーン位置は：
- 平原バイオーム
- 近くに鉄鉱石帯と石炭層
- 水源あり

## 鉱石分布（掘る場合）

採掘機以外で鉱石を直接掘る場合の分布。

| 鉱石 | 高度 | レア度 |
|------|------|--------|
| 石炭 | 0〜128 | 高 |
| 鉄鉱石 | -16〜72 | 高 |
| 銅鉱石 | -16〜112 | 中 |
| 金鉱石 | -64〜32 | 低 |
| ダイヤモンド | -64〜16 | 希少 |
| ウラン | -128〜-32 | 希少 |

## 構造物

ワールドに自然生成される構造物。

| 構造物 | 内容 | バイオーム |
|--------|------|------------|
| 廃工場 | 古い機械、レシピ | どこでも |
| 洞窟 | 鉱石、宝箱 | 地下 |
| 遺跡 | アーティファクト | 砂漠 |
| 難破船 | 材料、設計図 | 海洋 |

## 昼夜サイクル

| 項目 | 値 |
|------|-----|
| 1日 | 20分（リアルタイム） |
| 昼 | 0〜12000 ティック |
| 夜 | 12000〜24000 ティック |
| ソーラー発電 | 昼のみ |
| 敵 | なし（ストレスフリー） |

## 天候

| 天候 | 効果 |
|------|------|
| 晴れ | 通常 |
| 曇り | ソーラー効率50% |
| 雨 | ソーラー効率25%、水車効率+50% |
| 雷雨 | 避雷針で電力生成可能 |

天候サイクル: ランダム、平均30分で変化

## チャンク管理

| 項目 | 仕様 |
|------|------|
| 生成距離 | プレイヤーから8チャンク |
| 描画距離 | 設定可能（4〜16チャンク） |
| アンロード | プレイヤーから離れると休止 |
| 保存 | 変更があったチャンクのみ保存 |

### 機械の稼働

| 距離 | 動作 |
|------|------|
| ロード範囲内 | 通常稼働 |
| アンロード範囲 | 休止（時間経過で生産進まない） |

**対策:** チャンクローダー機械（電力消費で強制ロード）

## ワールド設定

ワールド作成時に設定可能。

| 設定 | オプション |
|------|------------|
| シード値 | 任意の数値/文字列 |
| ワールドタイプ | 通常 / フラット / 島 |
| 資源量 | 少ない / 普通 / 多い |
| バイオームサイズ | 小 / 中 / 大 |

## MOD/エディタ対応

バイオームと資源分布はエディタで定義可能。

```yaml
# biome_definition.yaml
id: iron_deposit
name: 鉄鉱石帯
resource: iron_ore
overlay: true  # 自然バイオームにオーバーレイ
spawn_weight: 10
valid_biomes: [plain, mountain]
size:
  min: 32
  max: 128
```

## 設計思想

| ポイント | 理由 |
|----------|------|
| 資源バイオーム | 採掘機の無限採掘を実現 |
| オーバーレイ方式 | 自然バイオームと資源を分離 |
| スポーン保証 | 初期資源の近くに必ずスポーン |
| 敵なし | ストレスフリー |
