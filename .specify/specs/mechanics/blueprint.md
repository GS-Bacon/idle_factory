# ブループリント

## 概要

工場の設計を保存・再利用するシステム。Factorioのブループリント + Satisfactoryの建設モードを参考。

## 入手時期

Tier 5「ロボット工学」クエスト完了で解放。

## 基本仕様

| 項目 | 値 |
|------|-----|
| 最大サイズ | 64×64×64 ブロック |
| 保存形式 | YAML（圧縮） |
| 保存先 | ワールドデータ + ファイルエクスポート可 |

## 作成方法

### 1. 範囲選択

| 操作 | 動作 |
|------|------|
| ブループリントツール + 左ドラッグ | 始点→終点で直方体範囲選択 |
| Shift + 左クリック | 個別ブロック追加選択 |
| Ctrl + 左クリック | 個別ブロック除外 |
| 右クリック | 選択確定、編集画面へ |

### 2. 編集画面

| 項目 | 操作 |
|------|------|
| 名前 | 任意の名前を入力 |
| アイコン | 含まれるブロックから選択 |
| 説明 | 任意のメモ |
| 原点変更 | 設置時の基準点を変更 |
| 回転プレビュー | 90度単位で回転確認 |

### 3. 保存

- ブループリントライブラリに保存
- ブループリントブック（複数をまとめる）に追加可能

## 設置方法

### 手動設置

| 操作 | 動作 |
|------|------|
| ブループリント選択 + 右クリック | ゴースト設置（半透明プレビュー） |
| R キー | 90度回転 |
| F キー | 左右反転 |
| Shift + スクロール | 上下移動 |
| 左クリック | 設置確定 |

### ゴースト設置

設置確定時、実際のブロックは配置されず「ゴースト」として表示。

| 状態 | 表示 |
|------|------|
| 資材あり | 青色ゴースト |
| 資材不足 | 赤色ゴースト |
| 配置不可（地形干渉） | 赤色 + 警告アイコン |

### 建設方法

| 方法 | 説明 |
|------|------|
| 手動建設 | プレイヤーがインベントリから資材を消費して1つずつ設置 |
| 建設ロボット | ロボポート範囲内で自動建設 |

## 建設ロボットとの連携

| 項目 | 仕様 |
|------|------|
| ロボポート範囲 | 50ブロック半径 |
| 建設ロボット容量 | 1アイテム/回 |
| 資材供給 | ロボポート内のチェストから取得 |
| 優先順位 | 電力ケーブル → 機械 → コンベア → パイプ |

## ブループリント文字列

共有用のエンコード形式。

| 項目 | 仕様 |
|------|------|
| 形式 | Base64エンコード + zlib圧縮 |
| プレフィックス | `BP:` で始まる |
| インポート | 文字列をコピー → ゲーム内でCtrl+V |
| エクスポート | ブループリント右クリック → 「文字列をコピー」 |

### 文字列例

```
BP:eJxLZGBgYGRgZmBmBAAACQAC
```

## ブループリントライブラリ

| 項目 | 仕様 |
|------|------|
| 保存数 | 無制限 |
| フォルダ分け | 可能 |
| 検索 | 名前・含まれるブロックで検索 |
| ソート | 名前順 / 作成日順 / 使用頻度順 |

## ブループリントブック

複数のブループリントをまとめる。

| 項目 | 仕様 |
|------|------|
| 1ブックあたり | 最大20ブループリント |
| 切り替え | スクロールホイール |
| 用途 | 関連設計をまとめる（例：精錬ライン一式） |

## 解体ブループリント

既存の建造物を撤去するための逆ブループリント。

| 項目 | 仕様 |
|------|------|
| 作成 | 解体ツール + 範囲選択 |
| 動作 | 範囲内のブロックを撤去対象にマーク |
| ロボット連携 | 解体ロボットが自動撤去 |
| 資材回収 | ロボポート内のチェストに格納 |

## 制限事項

| 制限 | 理由 |
|------|------|
| マルチブロック機械 | 完成形のみ保存（個別ブロックでは不可） |
| 地形 | 含めない（ブロックのみ） |
| アイテム内容物 | チェスト内アイテムは含めない |
| 液体 | パイプ内液体は含めない |

## UI

### ライブラリ画面（Bキー）

```
┌─────────────────────────────────────────┐
│ ブループリント                          │
├─────────────────────────────────────────┤
│ [検索: ________] [新規] [インポート]    │
├─────────────────────────────────────────┤
│ 📁 精錬ライン                           │
│   ├─ 鉄精錬4連                          │
│   ├─ 銅精錬4連                          │
│   └─ 鋼鉄精錬2連                        │
│ 📁 生産ライン                           │
│   ├─ 鉄板ライン                         │
│   └─ 回路基板ライン                     │
│ 📄 採掘前哨基地                         │
│ 📄 電力サブステーション                 │
└─────────────────────────────────────────┘
```

## 設計思想

| ポイント | 理由 |
|----------|------|
| 文字列共有 | コミュニティでの設計共有を促進 |
| ゴースト設置 | 資材確認と段階的建設が可能 |
| ロボット連携 | 大規模建設の効率化 |
| サイズ制限64³ | パフォーマンスとの兼ね合い |
