# PROJECT ROADMAP

このロードマップは、Ideal Factory Game の開発フェーズと目標を定義します。

---

## プロジェクトのフェーズとロードマップ

### Phase 1: Core Engine and Mod Foundation ✅ 完了
**目標:** データ駆動型アーキテクチャとレンダリング基盤の確立

**完了した機能:**
- ホットリロード対応のアセットサーバー
- ブロック、アイテム、レシピ用のYAMLローダー
- 動的なテクスチャアトラス生成
- チャンクシステム (32×32×32ブロック)
- ボクセルレンダリング用のGreedy Meshing
- カスタムシェーダーサポート (.wgsl)
- マルチプレイヤー基盤 (ヘッドレスサーバー、レプリケーション、クライアント予測)

### Phase 2: Logic and Logistics Simulation ✅ 完了
**目標:** 機能的な工場シミュレーションの実装

**完了した機能:**
- 固定タイムステップシミュレーション (20 TPS)
- マルチプレイヤー向け決定論的ロジック
- グリッドベースの機械配置 (SimulationGrid)
- インスタンス描画によるアイテムエンティティの最適化
- スタッキング機能付きインベントリシステム
- コンベアベルト用の視覚的なアイテムシステム
- デバッグオーバーレイ (F3) とデバッグモード

### Phase 3: Power and Multiblock Systems ✅ 完了
**目標:** 高度なメカニクスと複雑な構造

**完了した機能:**
- ストレス/速度メカニクスを備えた動力ネットワーク
  - グラフベースのネットワーク検出 (BFS)
  - ストレス計算と伝播
  - 過負荷検出と処理
- マルチブロック構造の検証
  - 回転サポート付きパターンマッチング
  - マスター/スレーブコンポーネントシステム
  - 自動的な整合性チェック
- 機械インタラクション用GUIフレームワーク
  - レシピ選択UI
  - リアルタイムインベントリ表示
  - イベント駆動型状態管理

### Phase 4: Advanced Automation and Scripting ⏳ 計画中
**目標:** プレイヤーが作成したロジックと自動化を可能にする

**計画された機能:**
- Lua VM統合 (mlua)
  - 安全なスクリプト実行のためのサンドボックスAPI
  - スクリプトアセットローディングシステム
  - API公開 (センサー、アクチュエータ、ロジックゲート)
- 信号システム
  - ワイヤーベースの信号伝送
  - ロジックゲート (AND, OR, NOTなど)
  - 数値信号処理

**技術要件:**
- サンドボックス化された実行環境
- パフォーマンス予算: スクリプト1つにつきティックあたり1ms未満
- スクリプトのホットリロードサポート
- デバッグツール (スクリプトインスペクター、エラーメッセージ)

### Phase 5: Optimization and Distribution ⏳ 計画中
**目標:** パフォーマンス最適化とモッディングサポート

**計画された機能:**
- マルチスレッド
  - 並列チャンク生成
  - 並列機械更新 (可能な場合)
  - 非同期レンダリングパイプライン
- LOD (Level of Detail)
  - 距離ベースのメッシュ簡略化
  - 遠くの機械のアイコン表示
  - メモリ管理のためのチャンクアンロード
- Modding SDK
  - サンプルMod (バニラをModとして)
  - Modローダーアーキテクチャ
  - ドキュメントとチュートリアル

**パフォーマンス目標:**
- フレームドロップなしで10,000+台の機械
- 輸送中のアイテム100,000+個
- ワールドの保存/読み込み時間 < 2秒

---

## 将来のビジョン

### 究極の目標
- **宇宙ステーション完成**: プレイヤーが資源を供給して視覚的な軌道ステーションを建設
- **ブループリントシステム**: 工場設計の保存と共有
- **クリエイティブ/サバイバルモード**: さまざまなゲームプレイ体験
- **コミュニティMod**: 活気あるModdingエコシステム

### 新機能設計の哲学
- **常にデータ駆動**: 新しいコンテンツはYAML/外部ファイルで定義
- **プレイヤーの権限強化**: 手取り足取りではなく、ツールを提供する
- **創発的な複雑性**: シンプルなルールから複雑な可能性が生まれる
- **人工的な制限なし**: プレイヤーが大規模な工場を自由に建設できるようにする

---

*このロードマップは生きた文書です。プロジェクトの進化に合わせて更新されますが、確立された原則との一貫性を保ってください。*
